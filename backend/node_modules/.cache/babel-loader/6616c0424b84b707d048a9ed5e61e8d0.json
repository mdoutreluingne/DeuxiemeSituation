{"ast":null,"code":"import Dbal from \"./dbal\";\nimport Transaction from \"../metier/Transaction\";\nexport default class DaoTransaction {\n  constructor() {\n    if (!!DaoTransaction.instance) {\n      return DaoTransaction.instance;\n    }\n\n    DaoTransaction.instance = this;\n    this.dbal = new Dbal();\n    return this;\n  }\n\n  async getAllByClientId(id) {\n    const liste = [];\n    const reponse = await this.dbal.get(\"/api/transaction/byIdClient/\" + id);\n    const transactions = JSON.parse(reponse);\n    transactions.forEach(t => {\n      liste.push(new Transaction(t));\n    });\n    return liste;\n  }\n\n  async initialiser(client) {\n    const aujourdhui = this.dbal.date2amd(new Date());\n    const url = \"/api/transaction/addTransaction/\" + aujourdhui + \"/0,00/Carte bancaire/ /Creation du compte/ /\" + client.id;\n    return await this.dbal.post(url);\n  }\n\n  async ajouter(client, transaction) {\n    const aujourdhui = d.date2amd(new Date());\n    const url = \"http://localhost:8080/api/transaction/addTransaction/\" + aujourdhui + \"/\" + transaction.montant + \"/\" + transaction.type + \"/\" + transaction.numero + \"/\" + transaction.commentaire + \"/ /\" + client.id;\n    const response = await this.dbal.post(url);\n    client.solde = parseFloat(client.solde) + parseFloat(t.montant);\n    return client;\n  }\n\n}","map":{"version":3,"sources":["C:/wamp64/www/PPE2/DeuxiemeSituation/backend/src/modele/DaoTransaction.js"],"names":["Dbal","Transaction","DaoTransaction","constructor","instance","dbal","getAllByClientId","id","liste","reponse","get","transactions","JSON","parse","forEach","t","push","initialiser","client","aujourdhui","date2amd","Date","url","post","ajouter","transaction","d","montant","type","numero","commentaire","response","solde","parseFloat"],"mappings":"AAAA,OAAOA,IAAP,MAAiB,QAAjB;AACA,OAAOC,WAAP,MAAwB,uBAAxB;AAEA,eAAe,MAAMC,cAAN,CAAqB;AAChCC,EAAAA,WAAW,GAAG;AACV,QAAI,CAAC,CAACD,cAAc,CAACE,QAArB,EAA+B;AAC3B,aAAOF,cAAc,CAACE,QAAtB;AACH;;AACDF,IAAAA,cAAc,CAACE,QAAf,GAA0B,IAA1B;AACA,SAAKC,IAAL,GAAY,IAAIL,IAAJ,EAAZ;AACA,WAAO,IAAP;AACH;;AAED,QAAMM,gBAAN,CAAuBC,EAAvB,EAA0B;AACtB,UAAMC,KAAK,GAAG,EAAd;AACA,UAAMC,OAAO,GAAG,MAAM,KAAKJ,IAAL,CAAUK,GAAV,CAAc,iCAAiCH,EAA/C,CAAtB;AACA,UAAMI,YAAY,GAAIC,IAAI,CAACC,KAAL,CAAWJ,OAAX,CAAtB;AACAE,IAAAA,YAAY,CAACG,OAAb,CAAsBC,CAAD,IAAK;AACtBP,MAAAA,KAAK,CAACQ,IAAN,CAAW,IAAIf,WAAJ,CAAgBc,CAAhB,CAAX;AACH,KAFD;AAGA,WAAOP,KAAP;AACH;;AAED,QAAMS,WAAN,CAAkBC,MAAlB,EAAyB;AACrB,UAAMC,UAAU,GAAG,KAAKd,IAAL,CAAUe,QAAV,CAAmB,IAAIC,IAAJ,EAAnB,CAAnB;AACA,UAAMC,GAAG,GAAG,qCAAqCH,UAArC,GAAkD,8CAAlD,GAAmGD,MAAM,CAACX,EAAtH;AACA,WAAO,MAAM,KAAKF,IAAL,CAAUkB,IAAV,CAAeD,GAAf,CAAb;AACH;;AAED,QAAME,OAAN,CAAcN,MAAd,EAAsBO,WAAtB,EAAkC;AAC9B,UAAMN,UAAU,GAAGO,CAAC,CAACN,QAAF,CAAW,IAAIC,IAAJ,EAAX,CAAnB;AACA,UAAMC,GAAG,GAAG,0DAA0DH,UAA1D,GAAuE,GAAvE,GACNM,WAAW,CAACE,OADN,GACgB,GADhB,GAENF,WAAW,CAACG,IAFN,GAEa,GAFb,GAGNH,WAAW,CAACI,MAHN,GAGe,GAHf,GAINJ,WAAW,CAACK,WAJN,GAKN,KALM,GAMNZ,MAAM,CAACX,EANb;AAOA,UAAMwB,QAAQ,GAAG,MAAM,KAAK1B,IAAL,CAAUkB,IAAV,CAAeD,GAAf,CAAvB;AACAJ,IAAAA,MAAM,CAACc,KAAP,GAAeC,UAAU,CAACf,MAAM,CAACc,KAAR,CAAV,GAA2BC,UAAU,CAAClB,CAAC,CAACY,OAAH,CAApD;AACA,WAAOT,MAAP;AACH;;AAtC+B","sourcesContent":["import Dbal from \"./dbal\";\r\nimport Transaction from \"../metier/Transaction\";\r\n\r\nexport default class DaoTransaction {\r\n    constructor() {\r\n        if (!!DaoTransaction.instance) {\r\n            return DaoTransaction.instance;\r\n        }\r\n        DaoTransaction.instance = this;\r\n        this.dbal = new Dbal();\r\n        return this;\r\n    }\r\n\r\n    async getAllByClientId(id){\r\n        const liste = [];\r\n        const reponse = await this.dbal.get(\"/api/transaction/byIdClient/\" + id);\r\n        const transactions = (JSON.parse(reponse));\r\n        transactions.forEach((t)=>{\r\n            liste.push(new Transaction(t))\r\n        });\r\n        return liste;\r\n    }\r\n\r\n    async initialiser(client){\r\n        const aujourdhui = this.dbal.date2amd(new Date());\r\n        const url = \"/api/transaction/addTransaction/\" + aujourdhui + \"/0,00/Carte bancaire/ /Creation du compte/ /\" + client.id;\r\n        return await this.dbal.post(url);\r\n    }\r\n\r\n    async ajouter(client, transaction){\r\n        const aujourdhui = d.date2amd(new Date());\r\n        const url = \"http://localhost:8080/api/transaction/addTransaction/\" + aujourdhui + \"/\"\r\n            + transaction.montant + \"/\"\r\n            + transaction.type + \"/\"\r\n            + transaction.numero + \"/\"\r\n            + transaction.commentaire\r\n            + \"/ /\"\r\n            + client.id;\r\n        const response = await this.dbal.post(url);\r\n        client.solde = parseFloat(client.solde) + parseFloat(t.montant);\r\n        return client;\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}