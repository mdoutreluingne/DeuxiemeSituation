{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\xampp\\\\htdocs\\\\DeuxiemeSituation\\\\backend\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\xampp\\\\htdocs\\\\DeuxiemeSituation\\\\backend\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"C:\\\\xampp\\\\htdocs\\\\DeuxiemeSituation\\\\backend\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\xampp\\\\htdocs\\\\DeuxiemeSituation\\\\backend\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"C:\\\\xampp\\\\htdocs\\\\DeuxiemeSituation\\\\backend\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"C:\\\\xampp\\\\htdocs\\\\DeuxiemeSituation\\\\backend\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _inherits from\"C:\\\\xampp\\\\htdocs\\\\DeuxiemeSituation\\\\backend\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React from'react';import Transaction from\"../metier/Transaction\";import DaoTransaction from\"../modele/DaoTransaction\";/**\r\n * Composant qui affiche le formulaire d'ajout des crédits\r\n */var Credits=/*#__PURE__*/function(_React$Component){_inherits(Credits,_React$Component);function Credits(props){var _this;_classCallCheck(this,Credits);_this=_possibleConstructorReturn(this,_getPrototypeOf(Credits).call(this,props));_this.state={/**@type {Client}**/client:props.client,/**@type {Transaction}**/transaction:new Transaction()};return _this;}/**\r\n     * Change les infos du formulaire\r\n     * @param zone {string}\r\n     * @param event\r\n     */_createClass(Credits,[{key:\"change\",value:function change(zone,event){var t=this.state.transaction;t[zone]=event.target.value;this.setState({transaction:t});}/**\r\n     * Met à jour le client s'il a changé\r\n     */},{key:\"updateClient\",value:function updateClient(){this.setState({client:this.props.client});}/**\r\n     * Ajoute les crédits\r\n     * @returns {Promise<void>}\r\n     */},{key:\"ajouter\",value:function(){var _ajouter=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var client;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(this.state.transaction.montant>0)){_context.next=10;break;}document.body.style.cursor='progress';_context.next=4;return new DaoTransaction().ajouter(this.state.client,this.state.transaction);case 4:client=_context.sent;document.body.style.cursor='default';alert(\"Les pépètes ont été ajoutés\");this.props.onAdd(client);_context.next=11;break;case 10:alert(\"Veuillez saisir un montant supérieur à 0\");case 11:case\"end\":return _context.stop();}}},_callee,this);}));function ajouter(){return _ajouter.apply(this,arguments);}return ajouter;}()},{key:\"render\",value:function render(){if(this.state.client.id!==this.props.client.id){this.updateClient();return null;}else if(this.state.client.id===0){return null;}else{var t=this.state.transaction;return React.createElement(\"section\",{className:\"credits\"},React.createElement(\"h2\",{className:\"title\"},\"CREDITS\"),React.createElement(\"div\",{className:\"saisie\"},React.createElement(\"legend\",{className:\"description\"},\"TYPE\"),React.createElement(\"select\",{className:\"zone type\",value:t.type,onChange:this.change.bind(this,\"type\")},React.createElement(\"option\",{value:\"Carte bancaire\"},\"Carte bancaire\"),React.createElement(\"option\",{value:\"Cheque\"},\"Cheque\"))),React.createElement(\"div\",{className:\"saisie\"},React.createElement(\"legend\",{className:\"description\"},\"MONTANT\"),React.createElement(\"input\",{type:\"number\",min:\"0\",className:\"zone montant\",value:t.montant,onChange:this.change.bind(this,\"montant\")})),React.createElement(\"div\",{className:\"saisie\"},React.createElement(\"legend\",{className:\"description\"},\"NUMERO\"),React.createElement(\"input\",{type:\"text\",className:\"zone numero\",value:t.numero,onChange:this.change.bind(this,\"numero\")})),React.createElement(\"div\",{className:\"saisie\"},React.createElement(\"legend\",{className:\"description\"},\"COMMENTAIRE\"),React.createElement(\"textarea\",{className:\"zone commentaire\",value:t.commentaire,onChange:this.change.bind(this,\"commentaire\")})),React.createElement(\"section\",{className:\"actions\"},React.createElement(\"button\",{className:\"ajouter\",onClick:this.ajouter.bind(this)},\"AJOUTER\")));}}}]);return Credits;}(React.Component);export{Credits as default};","map":{"version":3,"sources":["C:/xampp/htdocs/DeuxiemeSituation/backend/src/components/Credits.js"],"names":["React","Transaction","DaoTransaction","Credits","props","state","client","transaction","zone","event","t","target","value","setState","montant","document","body","style","cursor","ajouter","alert","onAdd","id","updateClient","type","change","bind","numero","commentaire","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport Transaction from \"../metier/Transaction\";\r\nimport DaoTransaction from \"../modele/DaoTransaction\";\r\n\r\n/**\r\n * Composant qui affiche le formulaire d'ajout des crédits\r\n */\r\nexport default class Credits extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            /**@type {Client}**/\r\n            client: props.client,\r\n            /**@type {Transaction}**/\r\n            transaction: new Transaction(),\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Change les infos du formulaire\r\n     * @param zone {string}\r\n     * @param event\r\n     */\r\n    change(zone, event) {\r\n        const t = this.state.transaction;\r\n        t[zone] = event.target.value;\r\n        this.setState({transaction: t})\r\n    }\r\n\r\n    /**\r\n     * Met à jour le client s'il a changé\r\n     */\r\n    updateClient(){\r\n        this.setState({\r\n            client: this.props.client\r\n        })\r\n    }\r\n\r\n    /**\r\n     * Ajoute les crédits\r\n     * @returns {Promise<void>}\r\n     */\r\n    async ajouter() {\r\n        if (this.state.transaction.montant > 0) {\r\n            document.body.style.cursor = 'progress';\r\n            const client = await new DaoTransaction().ajouter(this.state.client, this.state.transaction);\r\n            document.body.style.cursor = 'default';\r\n            alert(\"Les pépètes ont été ajoutés\");\r\n            this.props.onAdd(client);\r\n        } else {\r\n            alert(\"Veuillez saisir un montant supérieur à 0\");\r\n        }\r\n    }\r\n\r\n    render() {\r\n        if (this.state.client.id !== this.props.client.id) {\r\n            this.updateClient();\r\n            return null\r\n        }\r\n        else if(this.state.client.id === 0){\r\n            return null\r\n        }\r\n        else {\r\n            const t = this.state.transaction;\r\n            return (\r\n                <section className=\"credits\">\r\n                    <h2 className=\"title\">CREDITS</h2>\r\n                    <div className=\"saisie\">\r\n                        <legend className=\"description\">TYPE</legend>\r\n                        <select className=\"zone type\" value={t.type} onChange={this.change.bind(this, \"type\")}>\r\n                            <option value=\"Carte bancaire\">Carte bancaire</option>\r\n                            <option value=\"Cheque\">Cheque</option>\r\n                        </select>\r\n                    </div>\r\n                    <div className=\"saisie\">\r\n                        <legend className=\"description\">MONTANT</legend>\r\n                        <input type=\"number\" min=\"0\" className=\"zone montant\" value={t.montant}\r\n                               onChange={this.change.bind(this, \"montant\")}/>\r\n                    </div>\r\n                    <div className=\"saisie\">\r\n                        <legend className=\"description\">NUMERO</legend>\r\n                        <input type=\"text\" className=\"zone numero\" value={t.numero}\r\n                               onChange={this.change.bind(this, \"numero\")}/>\r\n                    </div>\r\n                    <div className=\"saisie\">\r\n                        <legend className=\"description\">COMMENTAIRE</legend>\r\n                        <textarea className=\"zone commentaire\" value={t.commentaire}\r\n                                  onChange={this.change.bind(this, \"commentaire\")}/>\r\n                    </div>\r\n                    <section className=\"actions\">\r\n                        <button className=\"ajouter\" onClick={this.ajouter.bind(this)}>AJOUTER</button>\r\n                    </section>\r\n                </section>\r\n            )\r\n        }\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}