{"ast":null,"code":"import Dbal from \"../modele/dbal\";\nimport client from \"../metier/client\";\nexport default class DaoClient {\n  constructor() {\n    if (!!DaoClient.instance) {\n      return DaoClient.instance;\n    }\n\n    DaoClient.instance = this;\n    this.dbal = new Dbal();\n    return this;\n  }\n\n  async getAll() {\n    const liste = [];\n    const reponse = await this.dbal.get(\"clients\");\n    const clients = JSON.parse(reponse);\n\n    for (const c of clients) {\n      liste.push(new client(c));\n    }\n\n    return liste;\n  }\n\n  async load(client) {\n    let response = await d.get(\"http://localhost:8080\" + c.ville);\n    c.ville = JSON.parse(response).nom;\n    response = await d.get(\"http://localhost:8080/api/client/soldeById/\" + c.id);\n    c.solde = JSON.parse(response);\n    return new client(c);\n  }\n\n}","map":{"version":3,"sources":["C:/wamp64/www/PPE2/DeuxiemeSituation/backend/src/modele/DaoClient.js"],"names":["Dbal","client","DaoClient","constructor","instance","dbal","getAll","liste","reponse","get","clients","JSON","parse","c","push","load","response","d","ville","nom","id","solde"],"mappings":"AAAA,OAAOA,IAAP,MAAiB,gBAAjB;AACA,OAAOC,MAAP,MAAmB,kBAAnB;AAEA,eAAe,MAAMC,SAAN,CAAgB;AAC3BC,EAAAA,WAAW,GAAG;AACV,QAAI,CAAC,CAACD,SAAS,CAACE,QAAhB,EAA0B;AACtB,aAAOF,SAAS,CAACE,QAAjB;AACH;;AACDF,IAAAA,SAAS,CAACE,QAAV,GAAqB,IAArB;AACA,SAAKC,IAAL,GAAY,IAAIL,IAAJ,EAAZ;AACA,WAAO,IAAP;AACH;;AAED,QAAMM,MAAN,GAAc;AACV,UAAMC,KAAK,GAAI,EAAf;AACA,UAAMC,OAAO,GAAG,MAAM,KAAKH,IAAL,CAAUI,GAAV,CAAc,SAAd,CAAtB;AACA,UAAMC,OAAO,GAAGC,IAAI,CAACC,KAAL,CAAWJ,OAAX,CAAhB;;AACA,SAAK,MAAMK,CAAX,IAAgBH,OAAhB,EAAyB;AACrBH,MAAAA,KAAK,CAACO,IAAN,CAAW,IAAIb,MAAJ,CAAWY,CAAX,CAAX;AACH;;AACD,WAAON,KAAP;AACH;;AAED,QAAMQ,IAAN,CAAWd,MAAX,EAAkB;AACd,QAAIe,QAAQ,GAAG,MAAMC,CAAC,CAACR,GAAF,CAAM,0BAA0BI,CAAC,CAACK,KAAlC,CAArB;AACAL,IAAAA,CAAC,CAACK,KAAF,GAAWP,IAAI,CAACC,KAAL,CAAWI,QAAX,CAAD,CAAuBG,GAAjC;AACAH,IAAAA,QAAQ,GAAG,MAAMC,CAAC,CAACR,GAAF,CAAM,gDAAgDI,CAAC,CAACO,EAAxD,CAAjB;AACAP,IAAAA,CAAC,CAACQ,KAAF,GAAUV,IAAI,CAACC,KAAL,CAAWI,QAAX,CAAV;AACA,WAAO,IAAIf,MAAJ,CAAWY,CAAX,CAAP;AACH;;AA1B0B","sourcesContent":["import Dbal from \"../modele/dbal\";\r\nimport client from \"../metier/client\";\r\n\r\nexport default class DaoClient {\r\n    constructor() {\r\n        if (!!DaoClient.instance) {\r\n            return DaoClient.instance;\r\n        }\r\n        DaoClient.instance = this;\r\n        this.dbal = new Dbal();\r\n        return this;\r\n    }\r\n\r\n    async getAll(){\r\n        const liste =  [];\r\n        const reponse = await this.dbal.get(\"clients\");\r\n        const clients = JSON.parse(reponse);\r\n        for (const c of clients) {\r\n            liste.push(new client(c));\r\n        }\r\n        return liste;\r\n    }\r\n\r\n    async load(client){\r\n        let response = await d.get(\"http://localhost:8080\" + c.ville);\r\n        c.ville = (JSON.parse(response)).nom;\r\n        response = await d.get(\"http://localhost:8080/api/client/soldeById/\" + c.id);\r\n        c.solde = JSON.parse(response);\r\n        return new client(c);\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}