{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\xampp\\\\htdocs\\\\DeuxiemeSituation\\\\backend\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\xampp\\\\htdocs\\\\DeuxiemeSituation\\\\backend\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"C:\\\\xampp\\\\htdocs\\\\DeuxiemeSituation\\\\backend\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\xampp\\\\htdocs\\\\DeuxiemeSituation\\\\backend\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import Dbal from\"./Dbal\";import Obstacle from\"../metier/Obstacle\";var DaoObstacle=/*#__PURE__*/function(){/**\r\n     * Singleton\r\n     * @returns {DaoObstacle|DaoObstacle}\r\n     */function DaoObstacle(){_classCallCheck(this,DaoObstacle);if(!!DaoObstacle.instance){return DaoObstacle.instance;}/**@type {DaoObstacle}**/DaoObstacle.instance=this;/**@type {Dbal}**/this.dbal=new Dbal();return this;}/**\r\n     * Récupères les données supplémentaire d'un obstacle\r\n     * @param obstacle {Obstacle}\r\n     * @returns {Promise<*>}\r\n     */_createClass(DaoObstacle,[{key:\"load\",value:function(){var _load=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(obstacle){var reponse,article;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return this.dbal.get(obstacle.article);case 2:reponse=_context.sent;article=JSON.parse(reponse);obstacle.libelle=article[0].libelle;obstacle.prix=article[0].montant;return _context.abrupt(\"return\",obstacle);case 7:case\"end\":return _context.stop();}}},_callee,this);}));function load(_x){return _load.apply(this,arguments);}return load;}()/**\r\n     * Récupère les obstacles d'une réservation\r\n     * @param reservation {Reservation}\r\n     * @returns {Promise<[]>}\r\n     */},{key:\"getObstacleByReservation\",value:function(){var _getObstacleByReservation=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(reservation){var response,obstacles,liste,i,o;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return this.dbal.get(\"/api/obstacle/obstacleByIdReservation/\"+reservation.id);case 2:response=_context2.sent;obstacles=JSON.parse(response);liste=[];_context2.t0=_regeneratorRuntime.keys(obstacles);case 6:if((_context2.t1=_context2.t0()).done){_context2.next=15;break;}i=_context2.t1.value;o=new Obstacle(obstacles[i]);_context2.next=11;return this.load(o);case 11:o=_context2.sent;liste.push(o);_context2.next=6;break;case 15:return _context2.abrupt(\"return\",liste);case 16:case\"end\":return _context2.stop();}}},_callee2,this);}));function getObstacleByReservation(_x2){return _getObstacleByReservation.apply(this,arguments);}return getObstacleByReservation;}()}]);return DaoObstacle;}();export{DaoObstacle as default};","map":{"version":3,"sources":["C:/xampp/htdocs/DeuxiemeSituation/backend/src/modele/DaoObstacle.js"],"names":["Dbal","Obstacle","DaoObstacle","instance","dbal","obstacle","get","article","reponse","JSON","parse","libelle","prix","montant","reservation","id","response","obstacles","liste","i","o","load","push"],"mappings":"ugBAAA,MAAOA,CAAAA,IAAP,KAAiB,QAAjB,CACA,MAAOC,CAAAA,QAAP,KAAqB,oBAArB,C,GAEqBC,CAAAA,W,yBACjB;;;OAIA,sBAAc,mCACV,GAAI,CAAC,CAACA,WAAW,CAACC,QAAlB,CAA4B,CACxB,MAAOD,CAAAA,WAAW,CAACC,QAAnB,CACH,CACD,yBACAD,WAAW,CAACC,QAAZ,CAAuB,IAAvB,CACA,kBACA,KAAKC,IAAL,CAAY,GAAIJ,CAAAA,IAAJ,EAAZ,CACA,MAAO,KAAP,CACH,CAED;;;;iJAKWK,Q,4JACe,MAAKD,IAAL,CAAUE,GAAV,CAAcD,QAAQ,CAACE,OAAvB,C,QAAhBC,O,eACAD,O,CAAUE,IAAI,CAACC,KAAL,CAAWF,OAAX,C,CAChBH,QAAQ,CAACM,OAAT,CAAmBJ,OAAO,CAAC,CAAD,CAAP,CAAWI,OAA9B,CACAN,QAAQ,CAACO,IAAT,CAAgBL,OAAO,CAAC,CAAD,CAAP,CAAWM,OAA3B,C,gCACOR,Q,qIAGX;;;;kKAK+BS,W,8KACJ,MAAKV,IAAL,CAAUE,GAAV,CAAc,yCAA2CQ,WAAW,CAACC,EAArE,C,QAAjBC,Q,gBACAC,S,CAAYR,IAAI,CAACC,KAAL,CAAWM,QAAX,C,CACZE,K,CAAQ,E,uCACED,S,yEAALE,C,oBACHC,C,CAAI,GAAInB,CAAAA,QAAJ,CAAagB,SAAS,CAACE,CAAD,CAAtB,C,yBACE,MAAKE,IAAL,CAAUD,CAAV,C,SAAVA,C,gBACAF,KAAK,CAACI,IAAN,CAAWF,CAAX,E,gEAEGF,K,uOA3CMhB,W","sourcesContent":["import Dbal from \"./Dbal\";\r\nimport Obstacle from \"../metier/Obstacle\";\r\n\r\nexport default class DaoObstacle {\r\n    /**\r\n     * Singleton\r\n     * @returns {DaoObstacle|DaoObstacle}\r\n     */\r\n    constructor() {\r\n        if (!!DaoObstacle.instance) {\r\n            return DaoObstacle.instance;\r\n        }\r\n        /**@type {DaoObstacle}**/\r\n        DaoObstacle.instance = this;\r\n        /**@type {Dbal}**/\r\n        this.dbal = new Dbal();\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Récupères les données supplémentaire d'un obstacle\r\n     * @param obstacle {Obstacle}\r\n     * @returns {Promise<*>}\r\n     */\r\n    async load(obstacle){\r\n        const reponse = await this.dbal.get(obstacle.article);\r\n        const article = JSON.parse(reponse);\r\n        obstacle.libelle = article[0].libelle;\r\n        obstacle.prix = article[0].montant;\r\n        return obstacle;\r\n    }\r\n\r\n    /**\r\n     * Récupère les obstacles d'une réservation\r\n     * @param reservation {Reservation}\r\n     * @returns {Promise<[]>}\r\n     */\r\n    async getObstacleByReservation(reservation){\r\n        const response = await this.dbal.get(\"/api/obstacle/obstacleByIdReservation/\" + reservation.id);\r\n        const obstacles = JSON.parse(response);\r\n        const liste = [];\r\n        for (const i in obstacles) {\r\n            let o = new Obstacle(obstacles[i]);\r\n            o = await this.load(o);\r\n            liste.push(o);\r\n        }\r\n        return liste;\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}