{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\xampp\\\\htdocs\\\\DeuxiemeSituation\\\\backend\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\xampp\\\\htdocs\\\\DeuxiemeSituation\\\\backend\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"C:\\\\xampp\\\\htdocs\\\\DeuxiemeSituation\\\\backend\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\xampp\\\\htdocs\\\\DeuxiemeSituation\\\\backend\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import Dbal from\"./Dbal\";import Reservation from\"../metier/Reservation\";var DaoReservation=/*#__PURE__*/function(){/**\r\n     * Singleton\r\n     * @returns {DaoReservation}\r\n     */function DaoReservation(){_classCallCheck(this,DaoReservation);if(!!DaoReservation.instance){return DaoReservation.instance;}/**@type {DaoReservation}**/DaoReservation.instance=this;/**@type {Dbal}**/this.dbal=new Dbal();return this;}/**\r\n     * Récupère la réservation lié à une transaction\r\n     * @param transaction {Transaction}\r\n     * @returns {Promise<Reservation>}\r\n     */_createClass(DaoReservation,[{key:\"getReservationByTransaction\",value:function(){var _getReservationByTransaction=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(transaction){var reponse;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return this.dbal.get(transaction.reservation);case 2:reponse=_context.sent;return _context.abrupt(\"return\",new Reservation(JSON.parse(reponse)));case 4:case\"end\":return _context.stop();}}},_callee,this);}));function getReservationByTransaction(_x){return _getReservationByTransaction.apply(this,arguments);}return getReservationByTransaction;}()}]);return DaoReservation;}();export{DaoReservation as default};","map":{"version":3,"sources":["C:/xampp/htdocs/DeuxiemeSituation/backend/src/modele/DaoReservation.js"],"names":["Dbal","Reservation","DaoReservation","instance","dbal","transaction","get","reservation","reponse","JSON","parse"],"mappings":"ugBAAA,MAAOA,CAAAA,IAAP,KAAiB,QAAjB,CACA,MAAOC,CAAAA,WAAP,KAAwB,uBAAxB,C,GAEqBC,CAAAA,c,yBACjB;;;OAIA,yBAAc,sCACV,GAAI,CAAC,CAACA,cAAc,CAACC,QAArB,CAA+B,CAC3B,MAAOD,CAAAA,cAAc,CAACC,QAAtB,CACH,CACD,4BACAD,cAAc,CAACC,QAAf,CAA0B,IAA1B,CACA,kBACA,KAAKC,IAAL,CAAY,GAAIJ,CAAAA,IAAJ,EAAZ,CACA,MAAO,KAAP,CACH,CAED;;;;kMAKkCK,W,oJACV,MAAKD,IAAL,CAAUE,GAAV,CAAcD,WAAW,CAACE,WAA1B,C,QAAhBC,O,+CACG,GAAIP,CAAAA,WAAJ,CAAgBQ,IAAI,CAACC,KAAL,CAAWF,OAAX,CAAhB,C,+OAvBMN,c","sourcesContent":["import Dbal from \"./Dbal\";\r\nimport Reservation from \"../metier/Reservation\";\r\n\r\nexport default class DaoReservation {\r\n    /**\r\n     * Singleton\r\n     * @returns {DaoReservation}\r\n     */\r\n    constructor() {\r\n        if (!!DaoReservation.instance) {\r\n            return DaoReservation.instance;\r\n        }\r\n        /**@type {DaoReservation}**/\r\n        DaoReservation.instance = this;\r\n        /**@type {Dbal}**/\r\n        this.dbal = new Dbal();\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Récupère la réservation lié à une transaction\r\n     * @param transaction {Transaction}\r\n     * @returns {Promise<Reservation>}\r\n     */\r\n    async getReservationByTransaction(transaction){\r\n        let reponse = await this.dbal.get(transaction.reservation);\r\n        return new Reservation(JSON.parse(reponse));\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}