{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\xampp\\\\htdocs\\\\DeuxiemeSituation\\\\backend\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\xampp\\\\htdocs\\\\DeuxiemeSituation\\\\backend\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"C:\\\\xampp\\\\htdocs\\\\DeuxiemeSituation\\\\backend\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\xampp\\\\htdocs\\\\DeuxiemeSituation\\\\backend\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"C:\\\\xampp\\\\htdocs\\\\DeuxiemeSituation\\\\backend\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"C:\\\\xampp\\\\htdocs\\\\DeuxiemeSituation\\\\backend\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _inherits from\"C:\\\\xampp\\\\htdocs\\\\DeuxiemeSituation\\\\backend\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React from'react';import DaoClient from\"../modele/DaoClient\";import DaoTransaction from\"../modele/DaoTransaction\";import client from\"../metier/Client\";import InfosClient from'./InfosClient';import Transactions from'./Transactions';import Credits from\"./Credits\";/**\r\n * Page principale qui appelle les composants\r\n */var Page=/*#__PURE__*/function(_React$Component){_inherits(Page,_React$Component);function Page(props){var _this;_classCallCheck(this,Page);_this=_possibleConstructorReturn(this,_getPrototypeOf(Page).call(this,props));_this.state={/**@type {boolean}**/initialized:false,/**@type {[Client]}**/liste_clients:props.clients,/**@type {Client}**/client:new client(null),/**@type {[Transaction]}**/transactions:[]};return _this;}/**\r\n     * Récupère la liste des clients\r\n     * @returns {Promise<void>}\r\n     */_createClass(Page,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var liste;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return new DaoClient().getAll();case 2:liste=_context.sent;this.setState({initialized:true,liste_clients:liste});case 4:case\"end\":return _context.stop();}}},_callee,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()/**\r\n     * Charge les infos du client séléctionné\r\n     * @param client\r\n     * @returns {Promise<void>}\r\n     */},{key:\"changeClient\",value:function(){var _changeClient=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(client){var list;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:list=[];if(!(client.id!==\"\")){_context2.next=5;break;}_context2.next=4;return new DaoTransaction().getAllByClientId(client.id);case 4:list=_context2.sent;case 5:this.setState({client:client,transactions:list});case 6:case\"end\":return _context2.stop();}}},_callee2,this);}));function changeClient(_x){return _changeClient.apply(this,arguments);}return changeClient;}()/**\r\n     * Affiche les transactions et l'ajout de crédit du client\r\n     * @link {Transactions}\r\n     * @link {Credits}\r\n     * @returns {*}\r\n     */},{key:\"afficherDonnees\",value:function afficherDonnees(){if(this.state.client.id!==\"\"){return React.createElement(\"section\",null,React.createElement(Transactions,{client:this.state.client,transactions:this.state.transactions}),React.createElement(Credits,{client:this.state.client,onAdd:this.changeClient.bind(this)}));}}},{key:\"render\",value:function render(){if(!this.state.initialized){return null;}else{var _client=this.state.client;return React.createElement(\"section\",{className:\"page\"},React.createElement(\"section\",{className:\"entete\"},React.createElement(\"section\",{className:\"navigation\"},React.createElement(\"h2\",{className:\"title\"},\"Comptabilit\\xE9\")),React.createElement(\"section\",{className:\"stickClient\"},React.createElement(\"h3\",null,_client.nom),React.createElement(\"h3\",null,_client.prenom),React.createElement(\"h3\",null,_client.mail))),React.createElement(\"section\",{className:\"corps\"},React.createElement(InfosClient,{clients:this.state.liste_clients,onChange:this.changeClient.bind(this)}),this.afficherDonnees()));}}}]);return Page;}(React.Component);export{Page as default};","map":{"version":3,"sources":["C:/xampp/htdocs/DeuxiemeSituation/backend/src/components/Page.js"],"names":["React","DaoClient","DaoTransaction","client","InfosClient","Transactions","Credits","Page","props","state","initialized","liste_clients","clients","transactions","getAll","liste","setState","list","id","getAllByClientId","changeClient","bind","nom","prenom","mail","afficherDonnees","Component"],"mappings":"g6BAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CAEA,MAAOC,CAAAA,SAAP,KAAsB,qBAAtB,CACA,MAAOC,CAAAA,cAAP,KAA2B,0BAA3B,CAEA,MAAOC,CAAAA,MAAP,KAAmB,kBAAnB,CAEA,MAAOC,CAAAA,WAAP,KAAwB,eAAxB,CACA,MAAOC,CAAAA,YAAP,KAAyB,gBAAzB,CACA,MAAOC,CAAAA,OAAP,KAAoB,WAApB,CAEA;;MAGqBC,CAAAA,I,0EACjB,cAAYC,KAAZ,CAAmB,sCACf,sEAAMA,KAAN,GACA,MAAKC,KAAL,CAAa,CACT,qBACAC,WAAW,CAAE,KAFJ,CAGT,sBACAC,aAAa,CAAEH,KAAK,CAACI,OAJZ,CAKT,oBACAT,MAAM,CAAE,GAAIA,CAAAA,MAAJ,CAAW,IAAX,CANC,CAOT,2BACAU,YAAY,CAAE,EARL,CAAb,CAFe,aAYlB,CAED;;;sTAKwB,IAAIZ,CAAAA,SAAJ,GAAgBa,MAAhB,E,QAAdC,K,eACN,KAAKC,QAAL,CAAc,CACVN,WAAW,CAAE,IADH,CAEVC,aAAa,CAAEI,KAFL,CAAd,E,wKAMJ;;;;0IAKmBZ,M,+HACXc,I,CAAO,E,MACPd,MAAM,CAACe,EAAP,GAAc,E,kDACD,IAAIhB,CAAAA,cAAJ,GAAqBiB,gBAArB,CAAsChB,MAAM,CAACe,EAA7C,C,QAAbD,I,uBAEJ,KAAKD,QAAL,CAAc,CACVb,MAAM,CAAEA,MADE,CAEVU,YAAY,CAAEI,IAFJ,CAAd,E,6JAMJ;;;;;gEAMiB,CACb,GAAI,KAAKR,KAAL,CAAWN,MAAX,CAAkBe,EAAlB,GAAyB,EAA7B,CAAgC,CAC5B,MACI,oCACI,oBAAC,YAAD,EAAc,MAAM,CAAE,KAAKT,KAAL,CAAWN,MAAjC,CAAyC,YAAY,CAAE,KAAKM,KAAL,CAAWI,YAAlE,EADJ,CAEI,oBAAC,OAAD,EAAS,MAAM,CAAE,KAAKJ,KAAL,CAAWN,MAA5B,CAAoC,KAAK,CAAE,KAAKiB,YAAL,CAAkBC,IAAlB,CAAuB,IAAvB,CAA3C,EAFJ,CADJ,CAMH,CACJ,C,uCAEQ,CACL,GAAI,CAAC,KAAKZ,KAAL,CAAWC,WAAhB,CAA6B,CACzB,MAAO,KAAP,CACH,CAFD,IAEO,CACH,GAAMP,CAAAA,OAAM,CAAG,KAAKM,KAAL,CAAWN,MAA1B,CACA,MACI,gCAAS,SAAS,CAAC,MAAnB,EACI,+BAAS,SAAS,CAAC,QAAnB,EACI,+BAAS,SAAS,CAAC,YAAnB,EACI,0BAAI,SAAS,CAAC,OAAd,oBADJ,CADJ,CAII,+BAAS,SAAS,CAAC,aAAnB,EACI,8BAAKA,OAAM,CAACmB,GAAZ,CADJ,CAEI,8BAAKnB,OAAM,CAACoB,MAAZ,CAFJ,CAGI,8BAAKpB,OAAM,CAACqB,IAAZ,CAHJ,CAJJ,CADJ,CAWI,+BAAS,SAAS,CAAC,OAAnB,EACI,oBAAC,WAAD,EAAa,OAAO,CAAE,KAAKf,KAAL,CAAWE,aAAjC,CAAgD,QAAQ,CAAE,KAAKS,YAAL,CAAkBC,IAAlB,CAAuB,IAAvB,CAA1D,EADJ,CAEK,KAAKI,eAAL,EAFL,CAXJ,CADJ,CAkBH,CACJ,C,kBApF6BzB,KAAK,CAAC0B,S,SAAnBnB,I","sourcesContent":["import React from 'react';\r\n\r\nimport DaoClient from \"../modele/DaoClient\";\r\nimport DaoTransaction from \"../modele/DaoTransaction\";\r\n\r\nimport client from \"../metier/Client\";\r\n\r\nimport InfosClient from './InfosClient';\r\nimport Transactions from './Transactions';\r\nimport Credits from \"./Credits\";\r\n\r\n/**\r\n * Page principale qui appelle les composants\r\n */\r\nexport default class Page extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            /**@type {boolean}**/\r\n            initialized: false,\r\n            /**@type {[Client]}**/\r\n            liste_clients: props.clients,\r\n            /**@type {Client}**/\r\n            client: new client(null),\r\n            /**@type {[Transaction]}**/\r\n            transactions: [],\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Récupère la liste des clients\r\n     * @returns {Promise<void>}\r\n     */\r\n    async componentDidMount() {\r\n        const liste = await new DaoClient().getAll();\r\n        this.setState({\r\n            initialized: true,\r\n            liste_clients: liste\r\n        })\r\n    }\r\n\r\n    /**\r\n     * Charge les infos du client séléctionné\r\n     * @param client\r\n     * @returns {Promise<void>}\r\n     */\r\n    async changeClient(client){\r\n        let list = [];\r\n        if (client.id !== \"\"){\r\n            list = await new DaoTransaction().getAllByClientId(client.id);\r\n        }\r\n        this.setState({\r\n            client: client,\r\n            transactions: list,\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Affiche les transactions et l'ajout de crédit du client\r\n     * @link {Transactions}\r\n     * @link {Credits}\r\n     * @returns {*}\r\n     */\r\n    afficherDonnees(){\r\n        if (this.state.client.id !== \"\"){\r\n            return(\r\n                <section>\r\n                    <Transactions client={this.state.client} transactions={this.state.transactions}/>\r\n                    <Credits client={this.state.client} onAdd={this.changeClient.bind(this)}/>\r\n                </section>\r\n            )\r\n        }\r\n    }\r\n\r\n    render() {\r\n        if (!this.state.initialized) {\r\n            return null\r\n        } else {\r\n            const client = this.state.client;\r\n            return (\r\n                <section className=\"page\">\r\n                    <section className=\"entete\">\r\n                        <section className=\"navigation\">\r\n                            <h2 className=\"title\">Comptabilité</h2>\r\n                        </section>\r\n                        <section className=\"stickClient\">\r\n                            <h3>{client.nom}</h3>\r\n                            <h3>{client.prenom}</h3>\r\n                            <h3>{client.mail}</h3>\r\n                        </section>\r\n                    </section>\r\n                    <section className=\"corps\">\r\n                        <InfosClient clients={this.state.liste_clients} onChange={this.changeClient.bind(this)}/>\r\n                        {this.afficherDonnees()}\r\n                    </section>\r\n                </section>\r\n            )\r\n        }\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}