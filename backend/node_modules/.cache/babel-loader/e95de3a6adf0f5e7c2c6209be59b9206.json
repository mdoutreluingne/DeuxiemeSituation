{"ast":null,"code":"import Dbal from \"./Dbal\";\nimport Obstacle from \"../metier/Obstacle\";\nexport default class DaoObstacle {\n  /**\r\n   * Singleton\r\n   * @returns {DaoObstacle|DaoObstacle}\r\n   */\n  constructor() {\n    if (!!DaoObstacle.instance) {\n      return DaoObstacle.instance;\n    }\n    /**@type {DaoObstacle}**/\n\n\n    DaoObstacle.instance = this;\n    /**@type {Dbal}**/\n\n    this.dbal = new Dbal();\n    return this;\n  }\n  /**\r\n   * Récupères les données supplémentaire d'un obstacle\r\n   * @param obstacle {Obstacle}\r\n   * @returns {Promise<*>}\r\n   */\n\n\n  async load(obstacle) {\n    const reponse = await this.dbal.get(obstacle.article);\n    const article = JSON.parse(reponse);\n    obstacle.libelle = article[0].libelle;\n    obstacle.prix = article[0].montant;\n    return obstacle;\n  }\n  /**\r\n   * Récupère les obstacles d'une réservation\r\n   * @param reservation {Reservation}\r\n   * @returns {Promise<[]>}\r\n   */\n\n\n  async getObstacleByReservation(reservation) {\n    const response = await this.dbal.get(\"/api/obstacle/obstacleByIdReservation/\" + reservation.id);\n    const obstacles = JSON.parse(response);\n    const liste = [];\n\n    for (const i in obstacles) {\n      let o = new Obstacle(obstacles[i]);\n      o = await this.load(o);\n      liste.push(o);\n    }\n\n    return liste;\n  }\n\n}","map":{"version":3,"sources":["C:/xampp/htdocs/DeuxiemeSituation/backend/src/modele/DaoObstacle.js"],"names":["Dbal","Obstacle","DaoObstacle","constructor","instance","dbal","load","obstacle","reponse","get","article","JSON","parse","libelle","prix","montant","getObstacleByReservation","reservation","response","id","obstacles","liste","i","o","push"],"mappings":"AAAA,OAAOA,IAAP,MAAiB,QAAjB;AACA,OAAOC,QAAP,MAAqB,oBAArB;AAEA,eAAe,MAAMC,WAAN,CAAkB;AAC7B;;;;AAIAC,EAAAA,WAAW,GAAG;AACV,QAAI,CAAC,CAACD,WAAW,CAACE,QAAlB,EAA4B;AACxB,aAAOF,WAAW,CAACE,QAAnB;AACH;AACD;;;AACAF,IAAAA,WAAW,CAACE,QAAZ,GAAuB,IAAvB;AACA;;AACA,SAAKC,IAAL,GAAY,IAAIL,IAAJ,EAAZ;AACA,WAAO,IAAP;AACH;AAED;;;;;;;AAKA,QAAMM,IAAN,CAAWC,QAAX,EAAoB;AAChB,UAAMC,OAAO,GAAG,MAAM,KAAKH,IAAL,CAAUI,GAAV,CAAcF,QAAQ,CAACG,OAAvB,CAAtB;AACA,UAAMA,OAAO,GAAGC,IAAI,CAACC,KAAL,CAAWJ,OAAX,CAAhB;AACAD,IAAAA,QAAQ,CAACM,OAAT,GAAmBH,OAAO,CAAC,CAAD,CAAP,CAAWG,OAA9B;AACAN,IAAAA,QAAQ,CAACO,IAAT,GAAgBJ,OAAO,CAAC,CAAD,CAAP,CAAWK,OAA3B;AACA,WAAOR,QAAP;AACH;AAED;;;;;;;AAKA,QAAMS,wBAAN,CAA+BC,WAA/B,EAA2C;AACvC,UAAMC,QAAQ,GAAG,MAAM,KAAKb,IAAL,CAAUI,GAAV,CAAc,2CAA2CQ,WAAW,CAACE,EAArE,CAAvB;AACA,UAAMC,SAAS,GAAGT,IAAI,CAACC,KAAL,CAAWM,QAAX,CAAlB;AACA,UAAMG,KAAK,GAAG,EAAd;;AACA,SAAK,MAAMC,CAAX,IAAgBF,SAAhB,EAA2B;AACvB,UAAIG,CAAC,GAAG,IAAItB,QAAJ,CAAamB,SAAS,CAACE,CAAD,CAAtB,CAAR;AACAC,MAAAA,CAAC,GAAG,MAAM,KAAKjB,IAAL,CAAUiB,CAAV,CAAV;AACAF,MAAAA,KAAK,CAACG,IAAN,CAAWD,CAAX;AACH;;AACD,WAAOF,KAAP;AACH;;AA5C4B","sourcesContent":["import Dbal from \"./Dbal\";\r\nimport Obstacle from \"../metier/Obstacle\";\r\n\r\nexport default class DaoObstacle {\r\n    /**\r\n     * Singleton\r\n     * @returns {DaoObstacle|DaoObstacle}\r\n     */\r\n    constructor() {\r\n        if (!!DaoObstacle.instance) {\r\n            return DaoObstacle.instance;\r\n        }\r\n        /**@type {DaoObstacle}**/\r\n        DaoObstacle.instance = this;\r\n        /**@type {Dbal}**/\r\n        this.dbal = new Dbal();\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Récupères les données supplémentaire d'un obstacle\r\n     * @param obstacle {Obstacle}\r\n     * @returns {Promise<*>}\r\n     */\r\n    async load(obstacle){\r\n        const reponse = await this.dbal.get(obstacle.article);\r\n        const article = JSON.parse(reponse);\r\n        obstacle.libelle = article[0].libelle;\r\n        obstacle.prix = article[0].montant;\r\n        return obstacle;\r\n    }\r\n\r\n    /**\r\n     * Récupère les obstacles d'une réservation\r\n     * @param reservation {Reservation}\r\n     * @returns {Promise<[]>}\r\n     */\r\n    async getObstacleByReservation(reservation){\r\n        const response = await this.dbal.get(\"/api/obstacle/obstacleByIdReservation/\" + reservation.id);\r\n        const obstacles = JSON.parse(response);\r\n        const liste = [];\r\n        for (const i in obstacles) {\r\n            let o = new Obstacle(obstacles[i]);\r\n            o = await this.load(o);\r\n            liste.push(o);\r\n        }\r\n        return liste;\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}